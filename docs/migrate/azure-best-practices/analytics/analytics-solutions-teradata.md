---
title: Teradata に関する Azure Synapse Analytics への移行
description: Azure のクラウド導入フレームワークを使用して、Teradata 用の分析ソリューションと、Azure Synapse Analytics への移行について説明します。
author: v-hanki
ms.author: brblanch
ms.date: 07/14/2020
ms.topic: conceptual
ms.service: cloud-adoption-framework
ms.subservice: migrate
ms.openlocfilehash: 7ed45f10e54ddfb4bac090dd9815e61b503b6003
ms.sourcegitcommit: a7eb2f6c4465527cca2d479edbfc9d93d1e44bf1
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 11/17/2020
ms.locfileid: "94713379"
---
<!-- cSpell:ignore DATEADD DATEDIFF Inmon NUSI Informatica Talend BTEQ FASTEXPORT QUALIFY ORC Parquet "Parallel Data Transporter" Attunity "Qlik Replicate" -->

# <a name="azure-synapse-analytics-solutions-and-migration-for-teradata"></a>Teradata に関する Azure Synapse Analytics ソリューションと移行

多くの組織は、インフラストラクチャのメンテナンスやプラットフォームの開発など、コストのかかるデータ ウェアハウスのタスクをクラウド プロバイダーに移行するための手順を行う準備ができています。 現在、組織は、Azure のようなより新しい環境で革新的なクラウド、サービスとしてのインフラストラクチャ、サービスとしてのプラットフォームを利用することを検討しています。

Azure Synapse Analytics は、エンタープライズ データ ウェアハウスとビッグ データ分析が統合された制限のない分析サービスです。 サーバーレスのオンデマンド リソースまたはプロビジョニング済みのリソースを使用しながら、各自の条件で自由にデータのクエリを大規模に実行できます。 従来の Teradata システムを Azure Synapse に移行するときに計画する内容について説明します。

Teradata と Azure Synapse は、両者とも、大量のデータで高いクエリ パフォーマンスを実現するために超並列処理手法を使用するように設計された SQL データベースであるという点で類似していますが、基本的な違いがいくつかあります。

- 従来の Teradata システムはオンプレミスにインストールされ、専用のハードウェアが使用されます。 Azure Synapse はクラウドベースであり、Azure のコンピューティングおよびストレージのリソースが使用されます。
- Teradata 構成のアップグレードは、追加の物理ハードウェアや、長時間かかる可能性のあるデータベースの再構成またはダンプと再読み込みを伴う大きなタスクです。 Azure Synapse では、コンピューティングとストレージのリソースは分離されているため、Azure の柔軟なスケーラビリティを利用して、個別にスケールアップやスケールダウンを簡単に行うことができます。
- サポートする物理システムがないので、必要に応じて Azure Synapse を一時停止したりそのサイズを変更したりして、リソースの使用率とコストを削減することができます。 Azure では、サポート ツールと機能のエコシステムに Azure Synapse が組み込まれている、グローバルに使用できる、高度なセキュリティで保護されたスケーラブルなクラウド環境にアクセスできます。

この記事では、Azure Synapse で移行した Teradata データ ウェアハウスおよびデータ マートについて同等以上のパフォーマンスを得ることを目的として、スキーマの移行について説明します。 既存の Teradata 環境からの移行に特に適用される考慮事項について検討します。

大まかに言えば、移行プロセスには次の表に示す手順が含まれています。

| 準備        | 移行                             | 移行後 |
| :----------------- | :----------------------------- | :---------------- |
| <ul><li> 範囲を定義する: 何を移行するか?</li><li>移行するデータとプロセスのインベントリを作成する。</li><li>データ モデルの変更を定義する。</li><li>使用する最適な Azure およびサードパーティのツールと機能を特定する。</li><li>新しいプラットフォームのスタッフ トレーニングを早期に実施する。</li><li>Azure のターゲット プラットフォームをセットアップする。</li></ul> |  <ul><li>小規模で簡単なものから始める。</li><li>可能であれば自動化する。</li><li>Azure の組み込みツールと機能を使用して移行作業を減らす。</li><li>テーブルとビューのメタデータを移行する。</li><li>関連する履歴データを移行する。</li><li>ストアド プロシージャとビジネス プロセスを移行またはリファクタリングする。</li><li>ETL/ELT の段階的読み込みプロセスを移行またはリファクタリングする。</li></ul> | <ul><li> 移行プロセスのすべてのステージを監視してドキュメント化する。</li><li>今後の移行のため、得られた経験を利用してテンプレートを作成する。</li><li>必要な場合、新しいプラットフォームのパフォーマンスとスケーラビリティを使用して、データ モデルを再エンジニアリングする。</li><li>アプリケーションとクエリ ツールをテストする。</li><li>クエリ パフォーマンスのベンチマークと最適化を行う。</li></ul> |

従来の Teradata 環境から Azure Synapse に移行する場合、Teradata のドキュメントで説明されているより一般的な情報に加えて、いくつかの特定の要因についても検討する必要があります。

## <a name="initial-migration-workload"></a>初期移行ワークロード

通常、従来の Teradata 環境は、時間の経過と共に進化して、複数のサブジェクト領域や混合ワークロードが含まれるようになります。 最初の移行プロジェクトをどこから開始するのかを決定する場合、次のような領域を選択することをお勧めします。

- 新しい環境の利点を迅速に提供することで、Azure Synapse への移行の実現可能性が証明される。
- 社内のテクニカル スタッフが、他の領域の移行に使用できるように、新しいプロセスやツールに関する経験を得られる。
- 移行元の Teradata 環境からの追加の移行で使用するために、現在のツールとプロセスに基づいたテンプレートが作成される。

これらの目標を支援する Teradata 環境からの初期移行に適した候補は、通常、OLTP ワークロードではなく、Power BI や分析のワークロードが実装されている部分です。 そのようなワークロードでは、スター スキーマやスノーフレーク スキーマなど、最小限の変更で移行できるデータ モデルが使用されている必要があります。

サイズに関しては、最初の演習で移行するデータ量が、短い時間で価値を示すことにより、Azure Synapse 環境の機能と利点を示すのに十分な大きさであることが重要です。 通常、そのような要件を満たすサイズは、1 から 10 テラバイト (TB) の範囲です。

リスクと実装時間を最小限に抑える初期移行プロジェクトのアプローチは、データ マートへの移行の範囲を制限することです。 Teradata の好例としては、Teradata データ ウェアハウスの OLAP データベース部分が挙げられます。 このアプローチは、移行の範囲が限定され、多くの場合、短いタイムスケール内で実現できるため、出発点として適しています。

データ マートの初期移行の範囲だけでは、ETL や履歴データの移行方法など、より広範な問題に対処することはできません。 これらの領域については後のフェーズで対処し、移行したデータ マート レイヤーを、それらを構築するために必要なデータとプロセスでバックフィルする必要があります。

## <a name="lift-and-shift-approach-vs-phased-approach"></a>リフト アンド シフト方式と段階的方式の比較

移行のために選択した原動力や範囲とは関係なく、次の 2 種類の一般的な移行のどちらかを選択できます。

- **リフトアンドシフト方式:** この方式では、既存のデータ モデル (スター スキーマなど) は、そのまま新しい Azure Synapse プラットフォームに移行されます。 重視される点は、Azure クラウド環境への移行の利点を実現するために必要な作業を減らして、リスクを最小限に抑え、移行にかかる時間を短縮することです。

  この方式は、単一のデータ マートが移行される既存の Teradata 環境で、データが既に適切に設計されたスター スキーマやスノーフレーク スキーマになっている場合に適しています。 この方式は、より最新のクラウド環境への移行に対して時間とコストの制約がある場合にも適しています。

- **変更を伴う段階的方式:** レガシ ウェアハウスが時間の経過と共に進化してきた場合は、必要なパフォーマンスを維持したり、IoT ストリームなどの新しいデータ ソースをサポートしたりするために、データ ウェアハウスのリエンジニアリングが必要になることがあります。 リエンジニアリング プロセスの一環として、スケーラブルなクラウド環境のよく知られている利点を得るために Azure Synapse に移行することを検討する場合があります。 このプロセスには、基になるデータ モデルの変更 (Inmon モデルから Azure Data Vault への移行など) が含まれる場合があります。

  最初に既存のデータ モデルをそのまま Azure に移行する方式をお勧めします。 その後、Azure サービスのパフォーマンスと柔軟性を利用して、既存の移行元システムに影響を与えずにリエンジニアの変更を適用します。

## <a name="virtual-machine-colocation-to-support-migration"></a>移行をサポートするための仮想マシン コロケーション

オンプレミスの Teradata 環境から移行するオプションのアプローチでは、Azure の安価なクラウド ストレージと柔軟なスケーラビリティを利用します。 最初に、ターゲットの Azure Synapse 環境と併置された Azure 仮想マシンに Teradata インスタンスを作成します。 次に、Teradata Parallel Transporter などの標準の Teradata ユーティリティ、または Qlik Replicate (旧称 Attunity) などのサードパーティのデータ レプリケーション ツールを使用して、VM インスタンスに移行する Teradata テーブルのサブセットを効率的に移動します。 すべての移行タスクは、Azure 環境で実行されます。

この方法には、いくつかの利点があります。

- データの初期レプリケーション後、ソース システムは他の移行タスクの影響を受けません。
- 使い慣れた Teradata のインターフェイス、ツール、ユーティリティを、Azure 環境内で利用できます。
- Azure 環境に移行した後、オンプレミスのソース システムとクラウド ターゲット システムの間で利用可能なネットワーク帯域幅に関する問題が発生する可能性はありません。
- Azure Data Factory などのツールを使用すると、Teradata Parallel Transporter などのユーティリティを効率的に呼び出して、データをすばやく簡単に移行できます。
- 移行プロセスは、Azure 環境内で完全に調整および制御されます。

## <a name="metadata-migration"></a>メタデータの移行

Azure 環境の機能を使用することで、移行プロセスを自動化し、調整することは理にかなっています。 この方式により、既に容量の上限に近い状態で実行されている可能性がある、既存の Teradata 環境への影響も最小限に抑えられます。

Azure Data Factory は、クラウドベースのデータ統合サービスです。 Data Factory を使用すると、クラウドにデータ ドリブン ワークフローを作成して、データ移動とデータ変換を調整および自動化できます。 Data Factory パイプラインは、さまざまなデータストアからデータを取り込むことができます。 その後、それらにより Azure HDInsight for Apache Hadoop、Apache Spark、Azure Data Lake Analytics、Azure Machine Learning などのコンピューティング サービスを使ってデータが処理され、変換されます。

まず、移行するデータ テーブルとその場所を一覧にするメタデータを作成します。 次に、Data Factory の機能を使用して、移行プロセスを管理します。

## <a name="design-differences-between-teradata-and-azure-synapse"></a>Teradata と Azure Synapse の設計の違い

従来の Teradata 環境から Azure Synapse への移行を計画する場合、この 2 つのプラットフォームの設計の違いを考慮することが重要です。

### <a name="multiple-databases-vs-a-single-database-and-schemas"></a>複数のデータベースに対して、1 つのデータベースとスキーマ

Teradata 環境では、環境全体の異なる部分に対して複数の異なるデータベースが存在することがあります。 たとえば、データ インジェストおよびステージング テーブルのデータベース、コア ウェアハウス テーブルのデータベース、データ マート ("_セマンティック レイヤー_" とも呼ばれる) のデータベースが個別に存在する場合があります。 Azure Synapse で ETL および ELT パイプラインとして個別のデータベースを処理するには、データベース間結合を実装し、異なるデータベース間でデータを移動する必要があります。

Azure Synapse 環境にあるデータベースは 1 つです。 スキーマは、テーブルを論理的に分かれたグループに分割するために使用されます。 Azure Synapse で一連のスキーマを使用して、Teradata から移行する個別のデータベースを模倣することをお勧めします。

Teradata 環境でスキーマを使用する場合、Teradata の既存のテーブルとビューを新しい環境に移動するために、新しい名前付け規則を使用することが必要になる可能性があります。 たとえば、Teradata の既存のスキーマ名とテーブル名を連結して Azure Synapse の新しいテーブル名にしてから、新しい環境でスキーマ名を使用して、元の個別のデータベース名を維持することができます。

もう 1 つの方法は、基になるテーブルに対して SQL ビューを使用して、その論理構造を維持することです。 SQL ビューを使用すると、次のような欠点が生じる可能性があります。

- Azure Synapse のビューは読み取り専用であるため、データに対する更新は、基になるベース テーブルで行う必要があります。
- ビューのレイヤーが既に存在する場合、別のビューのレイヤーを追加すると、パフォーマンスが低下する可能性があります。

### <a name="tables"></a>テーブル

異なるテクノロジ間でテーブルを移行するときは、生データとそれを記述するメタデータだけを、2 つの環境間で物理的に移動します。 インデックスのようなデータベース要素は、新しい環境では必要なかったり、異なる方法で実装されたりする場合があるため、移行元のシステムから移行しません。

ただし、インデックスなどのパフォーマンス最適化が移行元環境のどこで使用されていたかを把握しておくことは、新しい環境でパフォーマンスを最適化できる場所を示すのに役立ちます。 たとえば、一意でないセカンダリ インデックスが移行元の Teradata 環境で作成された場合、移行先の Azure Synapse 環境で非クラスター化インデックスを作成すると有益である、またはテーブル レプリケーションなどの他のネイティブなパフォーマンス最適化手法を使用する方が、既存のものと同じインデックスを作成するより適切であるという結論に達することがあります。

### <a name="high-availability-database"></a>高可用性データベース

Teradata では、`FALLBACK` オプションを使用して、ノード間でのデータ レプリケーションがサポートされます。 ノードに物理的に存在するテーブル行は、システム内の別のノードにレプリケートされます。 このアプローチによって、ノードで障害が発生してもデータが消失しないことが保証され、フェールオーバー シナリオの基礎が提供されます。

Azure SQL Database 内の高可用性アーキテクチャの目的は、データベースが 99.99% の時間稼働することを保証することにあります。 メンテナンス操作および停止がワークロードにどのように影響するかを考慮する必要はありません。 Azure により、パッチ適用、バックアップ、Windows および SQL のアップグレードなどの重要なサービス タスクに加えて、基本となるハードウェア、ソフトウェア、またはネットワークのエラーなどの予定外のイベントが自動的に処理されます。

これらのスナップショットは、Azure Synapse で復元ポイントを作成するサービスの組み込み機能です。 スナップショットを使用すると、Azure Synapse でデータ ストレージを自動的にバックアップできます。 この機能を有効にする必要はありません。 自動復元ポイントは、回復の SLA を保持するためにサービスで使用されるため、現時点では、ユーザーが個々に削除することはできません。

Azure Synapse によって、1 日を通してデータ ウェアハウスのスナップショットが取得されます。 作成された復元ポイントは、7 日間使用できます。 この保有期間は変更できません。 Azure Synapse により、8 時間の回復ポイントの目標がサポートされています。 プライマリ リージョンのデータ ウェアハウスを、過去 7 日間に作成されたいずれかのスナップショットから復元することができます。 組織がさらに細かいバックアップを必要とする場合は、他のユーザー定義オプションを使用できます。

### <a name="unsupported-teradata-table-types"></a>サポートされていない Teradata テーブル型

Teradata には、時系列とテンポラル データに対する特殊なテーブル型のサポートが含まれています。 これらのテーブル型に対する構文と一部の関数は、Azure Synapse により直接サポートされていませんが、データを、必要なデータ型を含む標準テーブルに移行し、日付/時刻列でインデックス作成またはパーティション分割することができます。

Teradata には、クエリの書き換えによってテンポラル クエリ内にフィルターを追加し、該当する日付範囲を制限すると、テンポラル クエリ機能が実装されます。 移行元の Teradata 環境でテンポラル クエリを使用している場合、それを移行するには、関連するテンポラル クエリにフィルターを追加する必要があります。

Azure 環境には、Azure Time Series Insights を使用して大規模な時系列データの複雑な分析を行うための機能も含まれています。 Time Series Insights は、IoT データ分析アプリケーション向けに設計されており、そのユース ケースにより適している可能性があります。 詳細については、「[Azure Time Series Insights](https://azure.microsoft.com/services/time-series-insights/)」を参照してください。

### <a name="teradata-data-type-mapping"></a>Teradata データ型のマッピング

Teradata の一部のデータ型は、Azure Synapse で直接サポートされていません。 次の表は、これらのデータ型とそれらの推奨される処理方法を示します。 この表で、Teradata の列の型は、システム カタログ (たとえば、`DBC.ColumnsV` 内) に格納される型です。

Teradata カタログ テーブルのメタデータを使用して、これらのデータ型のいずれかを移行する必要があるかどうかを判断し、移行プランで、リソースのサポートを計画します。 たとえば、次のセクションで示すような SQL クエリを使用して、解決が必要なサポートされていないデータ型の使用を検出できます。

サードパーティ ベンダーからは、プラットフォーム間でのデータ型のマッピングなど、移行を自動化できるツールとサービスが提供されています。 Teradata 環境で、Informatica や Talend などのサードパーティの ETL ツールが既に使用されている場合は、そのツールを使用して、必要なデータ変換を実装できます。

## <a name="sql-data-manipulation-language-dml-syntax-differences"></a>SQL データ操作言語 (DML) の構文の違い

Teradata SQL と Azure Synapse では、SQL データ操作言語 (DML) 構文にいくつかの違いがあることに注意する必要があります。

- `QUALIFY`:Teradata では、`QUALIFY` 演算子がサポートされています。

   次に例を示します。

  `SELECT col1 FROM tab1 WHERE col1='XYZ'`

  サードパーティのツールとサービスを使用すると、データ マッピング タスクを自動化できます。

  `QUALIFY ROW_NUMBER() OVER (PARTITION by col1 ORDER BY col1) = 1;`

  Azure Synapse では、次の構文を使用して同じ結果を得ることができます。

  `SELECT * FROM (SELECT col1, ROW_NUMBER() OVER (PARTITION by col1 ORDER BY col1) rn FROM tab1 WHERE c1='XYZ' ) WHERE rn = 1;`

- **日付の算術演算子:** Azure Synapse には、`DATEADD` や `DATEDIFF` などの演算子があり、これらを`DATE` または `DATETIME` で使用することができます。

   Teradata によって、次のような日付の直接減算がサポートされています。

  - `SELECT DATE1 - DATE2 FROM ...`

  - `LIKE ANY` の構文

    例:

    `SELECT * FROM CUSTOMER WHERE POSTCODE LIKE ANY ('CV1%', 'CV2%', CV3%') ;`.

    Azure Synapse の構文で相当するものは次のとおりです。

    `SELECT * FROM CUSTOMER WHERE (POSTCODE LIKE 'CV1%') OR (POSTCODE LIKE 'CV2%') OR (POSTCODE LIKE 'CV3%') ;`

- システム設定によって、既定では、Teradata の文字比較で大文字と小文字が区別されない場合があります。 Azure Synapse の場合、これらの比較では常に大文字と小文字が区別されます。

## <a name="functions-stored-procedures-triggers-and-sequences"></a>関数、ストアド プロシージャ、トリガー、シーケンス

Teradata のような成熟したレガシ環境からデータ ウェアハウスを移行する場合、単純なテーブルやビュー以外の要素を新しいターゲット環境に移行することがしばしば必要になります。 Teradata で Azure Synapse への移行が必要になる可能性があるテーブル以外の要素の例としては、関数、ストアド プロシージャ、シーケンスなどがあります。 移行の準備フェーズでは、移行するオブジェクトのインベントリを作成する必要があります。 プロジェクト計画で、すべてのオブジェクトを処理する方法を定義し、それらを移行するための適切なリソースを割り当てます。

Teradata 環境で関数またはストアド プロシージャとして実装されている機能の代わりになるサービスが、Azure 環境で見つかる場合があります。 通常、Teradata の関数をコーディングし直すのではなく、Azure の組み込み機能を使用する方が効率的です。

関数、ストアド プロシージャ、トリガー、シーケンスの移行に関する詳細情報を次に示します。

- **関数:** ほとんどのデータベース製品と同様に、Teradata によって SQL の実装でのシステム関数とユーザー定義関数がサポートされています。 一般的なシステム関数は、Azure Synapse などの別のデータベース プラットフォームに移行されると、通常、新しい環境で使用でき、変更なしに移行できます。 新しい環境でシステム関数の構文が若干異なる場合は、通常、必要な変更を自動化できます。

  新しい環境に同等のものがない任意のユーザー定義関数とシステム関数については、再コーディングが必要になる場合があります。 新しい環境で使用できる言語を使用します。 Azure Synapse でユーザー定義関数を実装するには、一般的な Transact-SQL 言語が使用されます。

- **ストアド プロシージャ:** ほとんどの最新のデータベース製品では、データベースにプロシージャを保存できます。 ストアド プロシージャには、通常、SQL ステートメントといくつかの手続き型ロジックが含まれています。 また、データや状態が返される場合もあります。

  Teradata には、ストアド プロシージャを作成するためのストアド プロシージャ言語が用意されています。 Azure Synapse では、T-SQL を使用してストアド プロシージャがサポートされます。 ストアド プロシージャを Azure Synapse に移行する場合は、T-SQL を使用してそれらをコーディングし直す必要があります。

- **トリガー:** Azure Synapse でトリガーを作成することはできませんが、Data Factory でトリガーを実装することができます。

- **シーケンス:** Azure Synapse シーケンスは、Teradata と同様の方法で処理されます。 系列内の次のシーケンス番号を作成するには、`IDENTITY` 列または SQL コードを使用します。

## <a name="metadata-and-data-extraction"></a>メタデータとデータの抽出

Teradata 環境からメタデータとデータを抽出する方法を計画する場合は、次の情報を考慮します。

- **データ定義言語 (DDL) の生成:** 前述のとおり、Teradata の既存の `CREATE TABLE` および `CREATE VIEW` スクリプトを編集して、同等の定義を作成することができ、必要に応じて、データ型を変更します。 このシナリオでは、通常、余分な Teradata 固有の句 (たとえば、`FALLBACK`) を削除する必要があります。

  現在のテーブルとビューの定義を指定する情報が、システム カタログ テーブルに保持されます。 システム カタログ テーブルは、最新で完全な状態である可能性があるため、情報の最適なソースです。 ユーザーが管理するドキュメントは、現在のテーブル定義と同期されていない可能性があります。

  この情報にアクセスするには、`DBC.ColumnsV` などのカタログに関するビューを使用します。 また、ビューを使用して、Azure Synapse の同等のテーブルに対する同等の `CREATE TABLE` データ記述言語 (DDL) ステートメントを生成することもできます。

  サードパーティの移行および ETL ツールでも、カタログ情報を使用して同じ結果が得られます。

- **データの抽出**

  `BTEQ` や `FASTEXPORT` などの標準的な Teradata ユーティリティを使用して、既存の Teradata テーブルから生データを移行します。 移行の演習では、通常、可能な限り効率的にデータを抽出することが重要です。 Teradata の最近のバージョンで推奨される方法は、Teradata Parallel Transporter を使用することです。これは、複数の並列 `FASTEXPORT` ストリームを使用して最高のスループットを実現するユーティリティです。

  Teradata Parallel Transporter は、Data Factory から直接呼び出すことができます。 前述のとおり、Teradata インスタンスがオンプレミスである場合でも、Azure 環境内の VM にコピーされる場合でも、データ移行プロセスを管理するための方法としてこれをお勧めしています。

  抽出されたデータに対して推奨されるデータ形式は、区切りテキスト ファイル ("_コンマ区切り値_" とも呼ばれます)、Optimized Row Columnar、または Parquet ファイルです。

Teradata 環境からデータと ETL を移行するプロセスの詳細については、Teradata のドキュメントを参照してください。

## <a name="performance-tuning-recommendations"></a>パフォーマンス チューニングに関する推奨事項

プラットフォームには、最適化について、いくつかの違いがあります。 パフォーマンス チューニングに関する推奨事項の次の一覧に、Teradata と Azure Synapse での下位レベルの実装の相違点と、移行に対する代替手段が強調して示されています。

- **データ分散オプション:** Azure では、個々のテーブルについて、データの分散方法を設定できます。 この機能の目的は、クエリの実行時に、処理ノード間を移動するデータ量を削減することにあります。

  大きなテーブル同士の結合の場合、一方または両方 (理想的には両方) のテーブルの結合列にハッシュを分散すると、結合するデータ行が同じ処理ノードに既に併置されているので、結合処理をローカルで確実に実行するのに役立ちます。

  Azure Synapse によって、小さいテーブルと大きいテーブルの結合でローカル結合を実現するための追加の方法が提供されます (これは、多くの場合、スター スキーマ モデルで "*ディメンション テーブルとファクト テーブルの結合*" と呼ばれます)。 小さいディメンション テーブルがすべてのノードにレプリケートされると、大きいテーブルの結合キーのすべての値に対して、一致するディメンション行をローカル環境で確実に使用できるようになります。 ディメンション テーブルが大きくない場合、テーブルをレプリケートする場合のオーバーヘッドは比較的低くなります。 この場合、前に説明したハッシュ分散アプローチを使用することが推奨されます。

- **データのインデックス作成:** Azure Synapse により、さまざまなインデックス作成オプションが提供されますが、これらのオプションの動作と使用は Teradata のインデックス作成オプションとは異なります。 Azure Synapse でのインデックス作成オプションについては、[Azure Synapse プールでのテーブルの設計](/azure/synapse-analytics/sql-data-warehouse/sql-data-warehouse-tables-overview)に関するページを参照してください。

  移行元の Teradata 環境内の既存のインデックスによって、データの使用方法をわかりやすく示すことができ、Azure Synapse 環境内でインデックスを作成するための候補列も示すことができます。

- **データのパーティション分割:** エンタープライズ データ ウェアハウスでは、ファクト テーブルに数 10 億行のデータが含まれる場合があります。 パーティション分割は、これらのテーブルでのメンテナンスとクエリを最適化するための手段です。 テーブルを個別のパーツに分割すると、一度に処理されるデータの量が少なくなります。 テーブルのパーティション分割は、`CREATE TABLE` ステートメントで定義されます。

  パーティション分割に使用できるフィールドは、テーブルごとに 1 つだけです。 多くのクエリが日付または日付範囲によってフィルター処理されるため、頻繁にパーティション分割に使用されるフィールドは日付フィールドです。 テーブルのパーティション分割は、初期読み込みの後で変更できます。 テーブルのパーティション分割を変更するには、`CREATE TABLE AS SELECT` ステートメントを使用する新しい分散でテーブルを再作成します。 Azure Synapse でのパーティション分割の詳細については、[Azure Synapse SQL プールでのテーブルのパーティション分割](/azure/synapse-analytics/sql-data-warehouse/sql-data-warehouse-tables-partition)に関するページを参照してください。

- **データ テーブルの統計:** ETL/ELT ジョブに `COLLECT STATISTICS` ステップを追加するか、テーブルの自動統計収集を有効にすると、データ テーブルの統計が最新であることを保証できます。

- **データの読み込み用の PolyBase:** PolyBase は、大量のデータをウェアハウスに読み込むために使用する最も効率的な方法です。 PolyBase を使用して、並列ストリームでデータを読み込むことができます。

- **ワークロード管理用のリソース クラス:** Azure Synapse では、リソース クラスを使用してワークロードが管理されます。 一般に、大きなリソース クラスを使用すると、個々のクエリのパフォーマンスが向上します。 リソース クラスを小さくすると、より高いレベルのコンカレンシーが得られます。 動的管理ビューを使用して使用率を監視し、適切なリソースが効率的に使用されるようにすることができます。

## <a name="next-steps"></a>次の手順

Teradata 移行の実装の詳細については、オンプレミスの移行プランについて Microsoft アカウント担当者にお問い合わせください。
