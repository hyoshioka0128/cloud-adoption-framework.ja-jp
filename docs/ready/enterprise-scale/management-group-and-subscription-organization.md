---
title: 管理グループとサブスクリプションの組織
description: 管理グループとサブスクリプションを整理する方法について説明します。
author: BrianBlanchard
ms.author: brblanch
ms.date: 04/02/2021
ms.topic: conceptual
ms.service: cloud-adoption-framework
ms.subservice: ready
ms.custom: think-tank
ms.openlocfilehash: 84bd37dd442cc9288033b29e351cc49bab80edb1
ms.sourcegitcommit: 37b9560a02ae301d05da338446a5d47fa3bc1908
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/13/2021
ms.locfileid: "107371642"
---
# <a name="management-group-and-subscription-organization"></a>管理グループとサブスクリプションの組織

![管理グループの階層を示す図。](./media/sub-org.png)

"_図 1:管理グループの階層。_

## <a name="define-a-management-group-hierarchy"></a>管理グループの階層を定義する

Azure Active Directory (Azure AD) テナント内の管理グループの構造では組織のマッピングがサポートされており、組織で大規模な Azure の導入を計画するときは十分に検討する必要があります。

**設計上の考慮事項:**

- 管理グループを使用すると、Azure Policy を介してポリシーとイニシアティブの割り当てを集約できます。

- 管理グループのツリーでは、[最大 6 レベルの深さ](/azure/governance/management-groups/overview#hierarchy-of-management-groups-and-subscriptions)までサポートできます。 この制限には、テナント ルート レベルまたはサブスクリプション レベルは含まれません。

- 管理グループの操作に対して Azure ロールベースのアクセス制御 (RBAC) 認可は既定で有効になっていないため、Azure AD テナント内のすべてのプリンシパル (ユーザー、サービス プリンシパル) は新しい管理グループを作成できます。

- 既定では、新しいサブスクリプションはすべてルート管理グループに配置されます。

**設計上の推奨事項:**

- できる限り、管理グループの階層は、3 ないし 4 レベル以下のある程度フラットなものにします。 この制限により、管理のオーバーヘッドと複雑さが軽減されます。

- 組織の構造を深い入れ子になった管理グループ階層に複製しないようにします。 管理グループは、ポリシーの割り当てと課金のために使用する必要があります。 このアプローチには、エンタープライズ規模のアーキテクチャで意図する目的のために管理グループを使用する必要があります。これにより、同じ管理グループ レベルで同じ種類のセキュリティとコンプライアンスを必要とするワークロードに対して Azure ポリシーが提供されます。

- ホストするワークロードの種類 (アーキタイプ) と、セキュリティ、コンプライアンス、接続、機能のニーズに基づいたものを表す管理グループをルートレベルの管理グループの下に作成します。 このグループ化構造により、セキュリティ、コンプライアンス、接続、機能について同じ設定を必要とするすべてのワークロードに対し、管理グループ レベルで適用される一連の Azure ポリシーを使用できます。

- Azure Policy で適用または追加できるリソース タグを使用して、管理グループ階層全体のクエリと階層間の水平移動を行うことができます。 これにより、複雑な管理グループ階層を使用しなくても、検索のニーズに合わせてリソースをグループ化できます。

- ユーザーが Azure をすぐに試すことができるように、最上位レベルのサンドボックス管理グループを作成します。 次にユーザーは、運用環境でまだ許可されていない可能性があるリソースを試すことができます。 サンドボックスは、開発、テスト、運用の各環境から分離されています。 最上位レベルのサンドボックス管理グループの詳細なガイダンスについては、[実装ガイドライン](./implementation-guidelines.md#sandbox-governance-guidance)をご覧ください。

- 管理グループ管理操作、サブスクリプション管理操作、ロールの割り当てを実行するには、専用のサービス プリンシパル名 (SPN) を使用します。 SPN を使用することは、昇格された権利を持つユーザーの数が減り、最小特権ガイドラインに従うということになります。

- ここで説明した SPN にルート レベルでのアクセス権を付与するには、ルート管理グループのスコープ (`/`) で `User Access Administrator` Azure ロールを割り当てます。 SPN にアクセス許可を付与した後は、`User Access Administrator` ロールを安全に削除できます。 これにより、SPN のみが `User Access Administrator` ロールの一部となります。

- ルート管理グループのスコープ (`/`) で、前述の SPN に `Contributor` アクセス許可を割り当てると、テナント レベルの操作が可能になります。 このアクセス許可レベルでは、その SPN を使用して、組織内の任意のサブスクリプションに対するリソースのデプロイと管理を確実に行うことができます。

- 共通プラットフォーム ポリシーと Azure ロールの割り当てをサポートするには、ルート管理グループの下に `Platform` 管理グループを作成します。 このグループ化構造では、Azure 基盤に使用されるサブスクリプションにさまざまなポリシーを確実に適用できます。 また、共通リソースの課金が、1 つの基盤サブスクリプション セットで確実に集中管理されます。

- ルート管理グループのスコープ (`/`) で行われる Azure Policy の割り当ての数を制限します。 この制限により、下位レベルの管理グループで継承されるポリシーのデバッグが最小限に抑えられます。

- エンタープライズ規模のランディング ゾーンで使用可能なポリシーを使用して、管理グループまたはサブスクリプションのスコープでコンプライアンス要件を適用します。 対処できるガバナンス要件の詳細については、「[ポリシー主導のガバナンス](#policy-driven-governance)」セクションのガイダンスを参照してください。

- 管理グループの[階層設定](/azure/governance/management-groups/how-to/protect-resource-hierarchy#setting---require-authorization)で Azure RBAC 承認を有効にすることにより、特権のあるユーザーのみがテナントの管理グループを操作できるようにします (既定では、すべてのユーザーがルート管理グループの下に独自の管理グループを作成することが承認されています)。

- 新しいサブスクリプションに対して既定の専用管理グループを[構成](/azure/governance/management-groups/how-to/protect-resource-hierarchy#setting---default-management-group)して、ルート管理グループの下にサブスクリプションが配置されないようにします。 これは、MSDN または Visual Studio の特典とサブスクリプションの対象ユーザーがいる場合に特に重要です。 この種類の管理グループの候補としては、`Sandbox` 管理グループがあります。

## <a name="subscription-organization-and-governance"></a>サブスクリプションの編成とガバナンス

サブスクリプションは、Azure 内での管理、課金、スケールの単位です。 大規模な Azure 導入を計画するときに、重要な役割を果たします。 このセクションは、重要な要素に基づいて、サブスクリプション要件を把握し、ターゲット サブスクリプションを設計する場合に役立ちます。 それらの要素とは、環境の種類、所有権とガバナンス モデル、組織構造、アプリケーション ポートフォリオです。

**設計上の考慮事項:**

- サブスクリプションは、Azure ポリシーを割り当てるための境界として機能します。 たとえば、支払いカード業界 (PCI) のワークロードなど、セキュリティで保護されたワークロードには、通常、コンプライアンスを実現するために追加のポリシーが必要です。 管理グループを使用して PCI コンプライアンスを必要とするワークロードをグループ化する代わりに、サブスクリプションで同じ分離を実現できます。 これにより、少数のサブスクリプションが含まれる管理グループが多数作成されるのを防ぐことができます。

- サブスクリプションはスケール ユニットとして機能します。これにより、コンポーネントのワークロードをプラットフォームの[サブスクリプション制限](/azure/azure-subscription-service-limits)内でスケーリングできます。 ワークロードの設計セッションの間に、サブスクリプションのリソース制限を考慮してください。

- サブスクリプションによって、ガバナンスと分離のための管理境界が提供され、問題が明確に分離されます。

- Azure AD テナントで Enterprise Agreement 加入契約サブスクリプションだけを使用するよう制限するために実行できる (将来的に自動化が予定されている) 手動プロセスがあります。 このプロセスにより、ルート管理グループのスコープでの Microsoft Developer Network サブスクリプションの作成が防止されます。

**設計上の推奨事項:**

- ビジネス ニーズや優先度に合わせて民主化された管理のユニットとして、サブスクリプションを扱います。

- サブスクリプションの所有者に各自のロールと責任を認識させます。
  - 1 年間に 4 回または 2 回、Azure AD Privileged Identity Management でアクセス レビューを実行し、ユーザーが顧客組織内を移動することで特権が急増しないことを確認します。
  - 予算の支出とリソースの使用を完全に所有します。
  - ポリシーのコンプライアンスを保証し、必要に応じて修復します。
  
- 新しいサブスクリプションの要件を特定するときは、次の原則を使用します。
  - **スケールの制限:** サブスクリプションは、コンポーネントのワークロードがプラットフォームのサブスクリプション制限内でスケーリングされるときのスケール ユニットとして機能します。 たとえば、ハイパフォーマンス コンピューティング、IoT、SAP などの大規模で特殊なワークロードはすべて、制限 (Azure Data Factory の統合に対する 50 個の制限など) を回避するために個別のサブスクリプションを使用するのに適しています。
  - **管理の境界:** サブスクリプションによって、ガバナンスと分離のための管理境界が提供されます。これにより、問題を明確に分離することができます。 たとえば、開発、テスト、運用などのさまざまな環境は、多くの場合、管理の観点から分離されます。
  - **ポリシーの境界:** サブスクリプションは、Azure ポリシーの割り当ての境界として機能します。 たとえば、PCI などのセキュリティ保護されたワークロードでは、通常、コンプライアンスを実現するために追加のポリシーが必要になります。 別個のサブスクリプションが使用されている場合、この追加のオーバーヘッドを全体的に考慮する必要はありません。 同様に、開発環境では、運用環境と比較して、追加のポリシーが必要になります。
  - **ターゲット ネットワーク トポロジ:** 仮想ネットワークは、サブスクリプション間で共有することはできませんが、仮想ネットワーク ピアリングや Azure ExpressRoute などのさまざまなテクノロジを使用して接続することができます。 新しいサブスクリプションが必要かどうかを判断するときには、相互通信が必要なワークロードを検討してください。
  
- 大規模な管理グループの構造およびポリシー要件に合わせて、管理グループにサブスクリプションをグループ化します。 グループ化により、ポリシーと Azure ロール割り当てのセットが同じであるサブスクリプションでは、確実に管理グループからそれらが継承されるようにして、重複する割り当てを回避できます。

- `Platform` 管理グループで専用の管理サブスクリプションを設定し、Azure Monitor Log Analytics ワークスペースや Azure Automation Runbook などのグローバル管理機能をサポートします。

- 必要に応じて、`Platform` 管理グループで専用の ID サブスクリプションを設定し、Windows Server Active Directory ドメイン コントローラーをホストします。

- `Platform` 管理グループで専用の接続サブスクリプションを設定し、Azure Virtual WAN ハブ、プライベート ドメイン ネーム システム (DNS)、ExpressRoute 回線、その他のネットワーク リソースをホストします。 専用のサブスクリプションによって、すべての基盤ネットワーク リソースが一緒に請求され、他のワークロードから分離されることが保証されます。

- 硬直したサブスクリプション モデルを避け、代わりに柔軟な条件を設定して、組織全体でサブスクリプションをグループ化します。 この柔軟性により、組織の構造とワークロードの構成が変化したときに、既存のサブスクリプションの固定したセットを使用するのではなく、新しいサブスクリプション グループを作成できることが保証されます。 1 つのサイズがサブスクリプションのすべてに適合するわけではありません。 ある部署で動作するものが、別の部署では機能しない場合があります。 アプリケーションによっては、同じランディング ゾーンのサブスクリプション内で共存する場合もあれば、独自のサブスクリプションを必要とする場合もあります。

## <a name="configure-subscription-quota-and-capacity"></a>サブスクリプションのクォータと容量を構成する

各 Azure リージョンに含めることができるリソースの数には制限があります。 大量のリソースを必要とするエンタープライズ規模の Azure 導入を検討するときは、十分な容量と SKU を使用でき、取得された容量を把握および監視できるようにしてください。

**設計上の考慮事項:**

- ワークロードに必要な各サービスについて、Azure プラットフォームでの制限とクォータを考慮します。

- 選択した Azure リージョンで必要な SKU を利用できるかどうかを検討します。 たとえば、新しい機能は特定のリージョンでしか使用できない場合があります。 VM など、特定のリソースに対する特定の SKU の可用性は、リージョンによって異なる場合があります。

- サブスクリプションのクォータは容量の保証ではなく、リージョンごとに適用されることを考慮します。

**設計上の推奨事項:**

- サブスクリプションをスケール ユニットとして使用し、必要に応じてリソースとサブスクリプションをスケールアウトします。 これにより、必要なときにスケールアウトに必要なリソースをワークロードで使用できるようになり、Azure プラットフォームでのサブスクリプションの制限に達することがなくなります。

- 必要なリージョンで予約容量を優先するには、予約インスタンスを使用します。 これにより、特定のリージョンでそのリソースが大量に必要になったときでも、ご利用のワークロードに必要な容量が確保されます。

- カスタム ビューを使用してダッシュボードを設定し、使用されている容量レベルを監視します。 容量使用率がクリティカル レベルに達した場合のアラートを設定します (たとえば、CPU 使用率 90%)。

- サブスクリプションのプロビジョニングの一環として、クォータ増量のサポート リクエストを送ります (たとえば、サブスクリプションで使用可能な合計 VM コア数)。 このアプローチによって、ワークロードで既定の制限を超える量が必要になる前に、クォータ制限が確実に設定されます。

- 必要なサービスと機能が、選択したデプロイ リージョンで利用可能であることを確認します。

## <a name="establish-cost-management"></a>コスト管理を確立する

技術資産のコストの透明性は、すべての大規模なエンタープライズ組織にとって重要な管理上の課題となります。 このセクションでは、大規模な Azure 環境でコストの透明性を実現する方法に関する主要な側面について説明します。

**設計上の考慮事項:**

- Azure App Service Environment や Azure Kubernetes Service など、高密度を実現するためには共有することが必要な場合がある、共有のサービスとしてのプラットフォーム (PaaS) リソースが関係する場合は、チャージバック モデルが必要になることがあります。

- コストを最適化するには、非運用ワークロードのシャットダウン スケジュールを使用します。

- Azure Advisor を使用して、コストを最適化するための推奨事項を確認します。

**設計上の推奨事項:**

- Azure Cost Management + Billing を使用して、コストを集計します。 アプリケーション所有者が使用できるようにします。

- Azure リソース タグを使用して、コストとグループ リソースを分類します。 タグを使用すれば、サブスクリプションを共有するワークロード、または複数のサブスクリプションにまたがる特定のワークロードに対して、チャージバック メカニズムを使用できます。

## <a name="policy-driven-governance"></a>ポリシー主導のガバナンス

組織でエンタープライズ規模の Azure ポリシーを使用して、次のようなガバナンス要件を適用できます。

- **パブリック IP ベースのサービスを禁止する**

    Azure PaaS (サービスとしてのプラットフォーム) サービスのほとんどは、各サービスに割り当てられたパブリック IP アドレスを使用して作成されます。 このオプションは、これらのサービスの使用を迅速に開始する必要がある開発者に役立ちます。

    パブリックエンド ポイントによって学習曲線が加速され、パイロットと小規模な概念実証 (POC) の実装の開発がサポートされますが、パイロット/POC を運用に対応したエンタープライズ アプリケーションに移行するとき、開発者はパブリック IP アドレスを見落とすこともあります。

    適切なセキュリティ対策が適用されていないパブリック IP を使用した運用ワークロードでは、セキュリティ リスクが高まる可能性があります。 脅威の種類の 1 つは、攻撃を仕掛けるためのゲートウェイとしてパブリック IP を使用するアクターです。 セキュリティ リスクを最小限に抑えるために、多くのエンタープライズ コンプライアンス ポリシーではパブリック IP が許可されていません。

    1 つのスコープをターゲットとし、パブリック IP アドレスがそこに作成されないようにするカスタム ポリシーがあります。 企業はこのポリシーを使用して、パブリック IP を持たない仮想マシン (VM) を作成することもできます。 同様に、企業がパブリック IP アドレスを使用して Azure サービスを作成できないようにするために役立つカスタム ポリシー イニシアチブ/ポリシー セットもあります。

- **監査とログの情報を収集する**

    詳細なレベルでの監査と診断の情報が不足していると、運用方法に影響する可能性があります。 監査情報が不完全である場合、複数の Azure サービスのログを相互に関連付けて、一貫したデバッグを行うことが困難になります。

    Azure サービスをプロビジョニングしたら、それらが Azure プラットフォームとやり取りする方法に関する詳細情報を提供する必要があります。 この情報は、ログとメトリックにおおまかに分割でき、各 Azure サービスは、サブコンポーネントにさらにグループ化することができます (たとえば、Azure パブリック IP リソースのサブコンポーネントとして `DDoSProtectionNotifications`、`DDoSMitigationReports`、`DDoSMitigationFlowLogs`)。 これらのサブカテゴリで診断情報を収集することも、組織が監査とデバッグを強化するのに役立ちます。

     企業が各 Azure サービスのログとメトリックをより深いレベルで収集するのに役立つ、カスタムの Azure ポリシー イニシアチブを利用できます。 このイニシアチブには、すべての Azure サービスのポリシーが含まれており、これらのポリシーによって重要なログ カテゴリとメトリックが自動的に収集されます。

- **SQL データベースの包括的なセキュリティを提供する**

     SQL データベースは、ほとんどの Azure のデプロイに共通の Azure サービスです。 残念ながら、これらは企業内外の悪意のあるアクティビティの対象にもなっています。 SQL データベースについてのカスタムの Azure ポリシー イニシアチブは、組織が次の主要なガバナンスの実践を適用するのに役立ちます。

  - **SQL の保存データを暗号化する**

    SQL データベースとそのバックアップは、悪意のあるアクターに対して脆弱です。 データベース ファイルまたはバックアップから SQL データベースを復元するのは簡単であるため、適切な防御システムが配置されていない場合は、悪意のあるアクターがこのデータにアクセスできます。

    SQL データベースの防御戦略を構築する際の最初の手順の 1 つは、SQL データベースを保存時に暗号化することです。 Azure SQL Database の Transparent Data Encryption (TDE) は、アプリケーションのコードを変更することなく保存データを暗号化し、データが侵害されたとしても、データにアクセスしようとする悪意のあるアクターの妨げとなります。 SQL データベースのデプロイが企業内で増えるにつれて、これらを TDE で作成することが重要になります。 SQL データベースの TDE を保証するカスタム ポリシーがあります。

  - **疑わしいアクティビティに対するアラートを最適化する**

    不正なアクターは、ビジネスクリティカルな SQL データベースにアクセスして悪用しようとします。 このような試行が企業によって認識されない場合、これらのインシデントを検出して解決することができないリスクが増加します。 最悪のシナリオは、企業が自社の SQL データベースが侵害されたかどうかを把握できないということです。

    SQL Database を使用すると、企業は Microsoft SQL Server の疑わしいアクティビティを報告するセキュリティ アラートを設定できます。 これらのアラートは、事前に構成された電子メール アドレスと、必要に応じて Azure サブスクリプションの管理者と所有者に届きます。 これらにより、SQL インジェクション攻撃やブルートフォース攻撃などの悪意のあるアクティビティを露わにすることができます。

    カスタムの Azure ポリシーを使用して、SQL データベースのセキュリティ アラートを有効にすることができます。 セキュリティ アラートでは、すべてのインシデントに関する詳細情報が提供され、これらはアラートがトリガーされたときに Azure portal または電子メールで表示されます。

  - **操作の監査証跡を調べる**

    ビジネスクリティカルな SQL データベースは、さまざまなデータ操作、制御、および定義言語のコマンドを使用して、日々運用できます。 これらの運用アクティビティを明確に制御したり、それに関する分析情報を得たりせずに、正当な操作と疑わしい操作を区別することは困難な場合があります。

    SQL 監査を有効にすると、企業はすべてのデータベース アクティビティに関する重要な情報を収集するのに役立ちます。また、SQL 監査は企業はデータベース イベントの監査証跡を作成および分析するのに役立ちます。 これは多くの業界または地域の規制コンプライアンス要件の一部でもあります。

    企業はカスタムの Azure ポリシーを使用して、SQL データベース監査を実施できます。 このポリシーにより、所有権、ロール メンバーシップ、スキーマの変更や、成功または失敗したログインなどの主要なデータベース イベントが監査およびレポートされます。 企業は、このポリシーの監査証跡を使用して、データベース操作に関する分析情報を入手し、業界または地域の規制要件に準拠することができます。

- **実証済みのベスト プラクティスを評価する**

   SQL データベースでは、そのライフサイクルを通してスキーマ、アクセス許可、および構成の変更が多数発生する可能性があり、これらの変更はベスト プラクティスから逸脱する可能性があります。 その結果、過剰なアクセス許可、孤立したロール、およびその他の設定のずれが、悪意のあるアクターによって悪用される可能性があります。

   Microsoft の SQL データベースに対するベスト プラクティスは、企業が SQL データベースを評価するのに役立ち、SQL Database には、支援を行うための組み込みの脆弱性評価サービスが用意されています。 脆弱性評価では、データベースおよびサーバーレベルのセキュリティ リスクをスキャンして識別し、脆弱性を修正できる修復タスクが提供されます。

    カスタムの Azure ポリシーを使用すると、SQL データベースが脆弱性評価を使用して構成されるようになります。 評価スキャンは定期的に実行され、レポートは Azure Storage アカウントに格納されます。また、事前に定義された電子メール アドレスを使用して、レポートのための結果が共有されます。

- **機密情報が意図的または偶発的に削除されないように保護する**

    Azure Key Vault には、キー、証明書、パスワードなどの機密情報が格納されています。 悪意のあるユーザーが、保存されている機密情報を削除することによってサービスを不正使用したり、標準ユーザーが、内部に格納されている機密情報を誤って削除したりする可能性があります。 適切なプロビジョニングを行わないと、Azure Key Vault で悪意のあるまたは偶発的な削除が行われてビジネスに悪影響を及ぼす可能性があります。

    Azure Key Vault の **論理的な削除** 機能を使用すると、意図的または偶発的な削除から企業を保護することができます。 **論理的な削除** が有効になっている場合、削除されたキーは事前定義された期間保持されます。 削除操作が意図的に行われた場合は、別の消去 (通常は、高いアクセス特権を持つユーザーによって行われる) までキー コンテンツを削除することができます。 削除操作が偶発的であった場合、削除されたキーは、定義された時間内に復元できます。

    Azure には、**論理的な削除** が Azure Key Vault で既定で有効になるようにするためのカスタム ポリシーが用意されています。 このポリシーは、Azure Key Vault コンテンツが悪意を持って削除された場合の追加のセキュリティ層を提供します。また、企業はコンテンツが誤って削除された場合に細かく制御することができます。

- **Azure Application Gateway の Web アプリケーション ファイアウォールを適用する**

    Azure で実行されている Web アプリケーションは、悪意のある攻撃の対象となる可能性があります。 インジェクションやクロスサイト スクリプティングといった [Web アプリケーションのセキュリティ リスクのトップ 10](https://owasp.org/www-project-top-ten/) は、Web アプリケーションの脆弱性を悪用したもので、攻撃が成功すると、組織のリソースを失い評判を落とすおそれがあります。

    Azure Application Gateway の Web アプリケーション ファイアウォール (WAF) では、Open Web Application Security Project (OWASP)、コア ルール セット 3.1、3.0、または 2.2 を使用して、Web アプリケーションを一般的な攻撃から保護します。 Application Gateway の WAF ポリシーには、**防止** または **検出** モードでアクセスできます。

    Azure には、Application Gateway での潜在的な構成の誤りを防ぐためのカスタム ポリシーが用意されており、既定では Application Gateway 用の WAF が作成されます。 WAF では、Application Gateway を使用して Azure Web アプリケーションを保護します。

- **VM での IP 転送を禁止する**

    IP 転送では、Azure VM でトラフィックを別の宛先にルーティングすることをサポートします。 特に要求した場合を除き、このルーティングにより、VM やその他の意図しないネットワークがパブリック IP アドレスを持つルーターとして露わになる可能性があります。

    Azure では、ファイアウォール、ロード バランサーや Azure Marketplace を介してデプロイされたその他ツールを使用して、仮想マシン (VM) 上で IP 転送を構成するオプションが提供されています。 これらのサービスを使用できるすべてのアプリケーションは、これらを Azure Marketplace トランザクション内で使用できます。

    特定のニーズを除けば、VM での IP 転送はセキュリティ上の障害になる可能性があります。 Azure には、VM が IP 転送ルーターとして機能するのを防ぐカスタム ポリシーが用意されており、このポリシーはランディング ゾーンのスコープで適用されます。 ランディング ゾーン内の VM に焦点を合わせることを、ユーザー要求の最終的な宛先とする必要があり、すべてのルーティングを接続サブスクリプションに実装する必要があります。

- **一元化された DNS レコード管理を適用する**

    プライベート Azure DNS ゾーンは、Azure リソースの DNS レコードを作成して管理するのに役立ちます。 これらのゾーンの急増に対応した制御を行わなければ、管理とネットワーク接続のデバッグの問題が生じる可能性があります。 オンプレミス サイトから Azure リソースに接続する必要があるハイブリッド環境では、断片化された DNS ゾーンによって、DNS レコードの重複とメンテナンスの問題が発生する可能性があります。

    企業は DNS レコードをわかりやすく管理するために、プライベート Azure DNS ゾーンを一元的にデプロイすることができます。 Azure Virtual Network はドメイン コントローラーの運用を助けるために、プライベート ゾーンとリンクすることができ、これによってオンプレミス サイトからの接続を合理化できます。 Azure Private Link およびエンド ポイントをサポートする Azure サービスでは、各アプリケーションのデプロイ時に、一元管理されたプライベート DNS ゾーンを使用でき、これらを作成する必要はありません。

    Azure には、ポリシーが適用されたスコープ内でプライベート DNS ゾーンの作成を防ぐことができるカスタム ポリシーが用意されています。 企業は、ポリシーの適用が無効になっている場合でも、このポリシーのコンプライアンス状態を表示できます。 このポリシーは、オンプレミス サイト間での接続を合理化し、Private Link またはエンド ポイントを使用して Azure PaaS サービスにアクセスするのに役立ちます。

- **ネットワーク トラフィック制御を適用する**

    Azure Virtual Network は、複数のサブネットに分割できます。 既定では、これらのサブネット間のネットワーク アクセス制御が存在しないため、サブネット内に要請されていないネットワーク トラフィックが発生する可能性があります。

    Azure ネットワーク セキュリティ グループ (NSG) は、受信および送信するサブネット トラフィックをフィルター処理するのに役立ち、ステートフル パケット検査では、ネットワーク トラフィックを許可または拒否できます。 サブネット内のリソースは、許可された IP アドレス範囲からのトラフィックのみを受信できます。

    Azure には、すべてのサブネットと NSG を組み合わせるカスタム ポリシーが用意されています。 サブネットと NSG を組み合わせることにより、既定の一連のルールでサブネットとの間のトラフィックが制御されるようになります。 企業はニーズに応じて、トラフィックをさらに制御するためのルールを追加または変更することもできます。

- **Azure Security Center を使用してセキュリティの脅威を検出して保護する**

    Azure サブスクリプションでは、VM やコンテナー イメージなどのさまざまなリソースを保持できます。これらのリソースは、マルウェアや望ましくないソフトウェアのインストール、VM 上の管理ポートへの制御されていないアクセスなどのリスクにさらされます。 セキュリティ攻撃がますます巧妙になり、経験豊富なセキュリティ専門家が限られているため、セキュリティの脆弱性を検出してワークロードを保護することは非常に難しくなっています。

    Azure Security Center は、セキュリティのベスト プラクティスに照らして Azure リソースのセキュリティ対策を評価する、Azure ネイティブのセキュリティ管理システムです。 これはデータおよびアプリケーション サービスに対する脅威を検出して防止するのに役立つほか、複数の統合ポイントを使用して迅速にデプロイできます。

    Azure には、Azure サブスクリプションと Security Center を組み合わせたカスタム ポリシーが用意されています。これにより、サブスクリプションで Security Center の脅威の検出と保護を迅速に受けることができます。 このポリシーでは、Security Center を使用して、VM やストレージ アカウント、その他 ７ つの主要な Azure サービスが自動的に対象になります。 セキュリティのベスト プラクティスからの逸脱が発生した場合、企業は継続的なセキュリティ評価と実用的なレコメンデーションによるベネフィットが得られます。

- **ランサムウェア攻撃およびデータ損失から保護する**

    ランサムウェアや侵入による攻撃の頻度の高まりは、企業にとっての新たな懸念事項です。 ランサムウェア攻撃が成功すると、ビジネスクリティカルなプロセスやアプリケーションが中断され、攻撃者は巨額の金銭を求めて企業を人質に取ります。

    Azure Backup では、Azure Virtual Machine のデータが悪意を持って、または偶発的に破壊されることを防ぎます。 バックアップは簡単に構成および拡張でき、管理と保護を簡単に行うために、データは Azure Recovery Vault にバックアップされます。

    Azure には、Azure Backup を使用して構成することで Virtual Machines を保護するカスタム ポリシーが用意されています。 このポリシーによって、Azure Recovery Services コンテナーが自動的にプロビジョニングされ、作成されるすべての Azure VM のバックアップ コンテナーが作成されます。

- **分散型サービス拒否攻撃から保護する**

    パブリックに到達可能な Azure リソースは、分散型サービス拒否 (DDoS) 攻撃に対して脆弱です。 これらの攻撃は、意図されたユーザーに対するアプリケーションの可用性に影響を与える可能性があり、攻撃が長時間に及ぶと、使用可能なすべてのリソースを使い果たし、ビジネスクリティカルなアプリケーションのダウンタイムを発生させる可能性があります。

    Azure DDoS Protection では、受信トラフィックを継続的に監視して潜在的な脅威を特定することで、DDoS 攻撃から Azure リソースを保護します。 企業は攻撃を受けている最中に、Microsoft の DDoS Rapid Response チームと協力することのベネフィットを得られます。

    Azure には、すべての Azure サブスクリプションに対して Azure DDoS Standard プランをそのスコープ内に自動的にプロビジョニングするカスタム ポリシーが用意されています。 このポリシーを使用すると、企業はサービスの対象となる Azure リージョンを選択できます。

- **プライベート DNS ゾーンで Private Link/エンドポイントを自動プロビジョニングする**

    企業におけるメンテナンスの課題の 1 つに、Azure PaaS サービスへのアクセスを必要とするアプリケーションごとにプライベート DNS ゾーンをどのように作成するかというものがあります。 Azure Private Link とプライベート エンドポイントは、プライベート IP アドレスを使用して Azure PaaS (サービスとしてのプラットフォーム) サービスへのアクセスを提供し、プライベート DNS ゾーンによって DNS レコードが解決されます。プライベート DNS ゾーン グループは、BLOB、キュー、テーブル、SQL などの Azure サービスから分類を使用してプライベート リンク接続をグループ化し、サービスごとに 1 つのプライベート DNS ゾーンを使用します。

    企業は一元的なプライベート DNS ゾーンを作成することもできます。また、カスタム Azure ポリシーでは、Private Link/エンドポイントを Azure サービスのプライベート DNS ゾーンと自動的に接続できます。

- **ファイアウォール規則を一元的に管理する**

    断片化されたファイアウォール規則では、制御されていない、あいまいなネットワーク トラフィック パスが発生する可能性があります。 すべてのファイアウォール インスタンスのファイアウォール規則を継続的に変更すると、ネットワークのセキュリティ対策を評価することが難しくなります。また、複数の規則があると、一元的に管理された一連の基本の規則と、ワークロード固有のネットワーク パスの規則を区別するのが困難になります。

    Azure Firewall のポリシーを使用すると、組織全体に適用される最小限の規則を組織が定義するのに役立ちます。 アプリケーション固有のポリシーが、基本の規則を継承して、エンタープライズおよびアプリケーションに固有のファイアウォール要件を満たす階層的な規則を作成できます。 規則がポリシーによって構成されている場合は、一元的に管理およびモニターできます。

    Azure には、企業が Azure Firewall ポリシーを一元的に定義するのに役立つカスタム ポリシーが用意されています。 企業はネットワーク トラフィック ルーティングの要件を満たすために、規則と優先順位の定義を制御します。 企業はニーズに応じてファイアウォール ポリシーを一元的に定義し、Azure Virtual WAN またはハブ アンド スポークのネットワーク トポロジにこれらを適用することができます。

- **ハブ アンド スポーク ネットワーク トポロジをプロビジョニングする**

    Azure にデプロイされるワークロードが増えるにつれて、ファイアウォールや VPN ゲートウェイなどの一連の共通サービスが使用され始めます。 慎重に計画しないと、共通サービスはアプリケーションをデプロイするごとに複製できるため、不要なコストと運用上のオーバーヘッドが発生します。 Azure からオンプレミスへの接続が必要で、アプリケーションのデプロイごとにこの接続が確立されるシナリオでは、ネットワーク トポロジの保守がさらに困難になります。

    Azure のハブ アンド スポークのネットワーク トポロジは、ネットワーク接続のニーズを合理化するのに役立ちます。 ハブの仮想ネットワーク (VNet) で共有サービスをホストできるのに対し、スポークの VNet はアプリケーション固有の Azure リソースをホストします。 ハブ アンド スポークの VNet では、VNet ピアリングを使用して相互に接続します。このネットワーク トポロジによって、すっきりしたネットワーク設計、管理の簡素化、コストの最適化が促進されます。

    Azure には、VPN と ExpressRoute のゲートウェイと Azure Firewall を使用してハブ VNet をプロビジョニングするカスタム ポリシーが用意されています。 企業では、ポリシー割り当ての一部として、ファイアウォールおよびゲートウェイのすべてのオプションを構成できます。 このポリシーにより、Azure ハブ アンド スポークのネットワーク トポロジをデプロイするプロセスが簡略化されます。

    もう 1 つのカスタム Azure ポリシーでは、2 つの VNet が互いにピアリングするのを防ぎ、代わりにハブの VNet 経由で相互に通信できるようにします。 VNet がハブを介して相互に通信するように構成すると、ネットワーク接続を制御およびモニターできるようになります。 また、メンテナンスの観点からもネットワーク トポロジが簡略化されています。

- **Azure Monitor の既定の構成をプロビジョニングする**

    Azure プラットフォーム、そのサービス、およびアプリケーションの間の関係を特定して視覚化できないと、障害や、パフォーマンスの低下を検出できないことにつながる可能性があります。 運用またはサポート チームは、特定の状態を修正する機会を見逃す可能性があり、Azure アプリケーションは、需要の急増または落ち込みに応じて自身をスケーリングできない場合もあります。

    Azure Monitor ログと Log Analytics ワークスペースでは、企業が重要な状態を理解して解決するのに役立つアラートが使用されます。 これらはダッシュボード、ブック、Microsoft Power BI を使用して、企業が安定的にログ情報のセットを視覚化および操作することをサポートします。 企業は Azure Monitor ログと Log Analytics ワークスペースを一緒に使用して、VM の自動スケールを構成し、余分なインスタンスを自動的に追加または削除することができます。

    Azure には、Log Analytics ワークスペースで Azure Monitor ログを構成するためのカスタム ポリシーが用意されています。 このポリシーでは、Azure SQL Database や Azure AD などの特定の Azure サービス用の Azure Monitor ソリューションから、事前にパッケージ化されたダッシュボード レポートをデプロイします。 また、Azure Monitor を使用して、Linux や Windows VM のパフォーマンス メトリックからデータ ソースが構成されます。

- **ログ ストレージとクエリを有効にする**

    ログのキャプチャ、格納、および管理はリソース、時間、コストがかかる可能性があるため、慎重に計画しないと複数の Azure ソースからのログ情報が管理不能になる可能性があります。 長期間かつ大量のログに及ぶ傾向またはパターンを特定することも、困難になる可能性があります。 Log Analytics のクエリでは、アラートおよび対話型レポートを使用して、企業が複数のソースからのログを効率的に格納および管理することができるようにします。

    Azure には、データ ログを格納するリポジトリとして機能する Log Analytics ワークスペースを作成するカスタム ポリシーが用意されています。 Azure Automation アカウントが作成され、これが Log Analytics ワークスペースにリンクして、タスクを自動化したり、これらのワークスペースに依存する Azure Monitor ソリューションをデプロイしたりします。 このポリシーは、ログの保持期間、Azure リージョン、およびその他のプロパティの構成にも役立ちます。

- **Azure-Arc 対応サーバーのログをプロビジョニングする**

    IT 資産が複数のクラウド、オンプレミス サイト、およびエッジの場所にまたがっている場合、企業は複数の環境や地理的な場所に散在するサーバーの管理とガバナンスに苦労することがあります。 さまざまな製品を使用してこれらのサーバーを監視するという考え方は途方もないことかもしれず、1 つの統合型アクセスおよび ID 管理ソリューションの下で複数のサーバーを複数の環境に割り当てることは、設定と管理が難しくなる可能性があります。

    Azure Arc では、異種環境にまたがるサーバー、kubernetes クラスター、データ サービスなどのリソースのガバナンスと管理方法が簡素化されます。 ハイブリッド リソースをネイティブの Azure リソースとして見ることにより、Azure Arc ではネイティブとハイブリッドのリソースを管理するための単一のコントロール ウィンドウを提供し、ネイティブとハイブリッドのリソースを、統合されたロールベースのアクセス制御ソリューションで管理します。

    Azure には、企業が Azure Arc 対応の Linux および Windows サーバー上に Log Analytics エージェントを設定するのに役立つ 2 つのカスタム ポリシーが用意されています。 また、ログの格納と管理を行うための Log Analytics ワークスペースも構成されます。 ポリシーを正常に割り当てると、スコープ内のサーバーの名前が識別され、それが Log Analytics エージェントに割り当てられます。

- **ネットワーク トラフィック ログの収集を強制する**

    Virtual Network とサブネットによって論理プライベート ネットワークの境界が提供されますが、Azure 内のネットワーク トラフィックを監視することは必要です。 適切な監視を行わないと、企業ネットワークは、侵害された IP アドレスからの悪意のあるまたは不明なトラフィックに対して脆弱になります。 現在のトラフィックを把握していないと、ネットワーク トラフィックの増加に対応して追加の容量をプロビジョニングすることが困難な場合があります。

    Azure Network Watcher は、Azure のサービスとしてのインフラストラクチャ (IaaS) サービスについてのネットワークの問題を企業が監視および修復するのに役立ちます。 このサービスでは、NSG フロー ログにより、ネットワーク トラフィックに関する情報をキャプチャできます。 企業はトラフィック分析とパターンを活用して、将来の容量のニーズを予測し、企業のガバナンス ポリシーに準拠することができます。

    Azure には、Network Watcher で NSG フロー ログを設定するためのカスタム ポリシーが用意されています。ここでは、NSG フロー ログを格納するリポジトリとして、ストレージ アカウントがプロビジョニングされます。 このポリシーでは、NSG フロー ログを格納する保持期間を構成することもできます。  

- **大規模なネットワーク接続ソリューションをプロビジョニングする**

    企業のネットワーク接続の要件は複雑になる場合があります。 成長を続けるネットワークに対して、新しいサイト、デバイス、およびユーザーの追加を絶えず要求されることで、プロビジョニングと管理が困難となり、企業内の複数の接点からネットワーク帯域幅とスループットの要求があることから、負担が大きくなる可能性もあります。

    Azure Virtual WAN は、組織が接続の課題を解決するのに役立つエンタープライズレベルのネットワーク サービスです。 このサービスでは、ネットワーク接続による高い集約スループット、Azure バックボーン経由の最適なルーティング、および統合された Azure 管理エクスペリエンスが提供されます。

    Azure には、Virtual WAN を設定し、サービス内に仮想ハブをプロビジョニングするためのカスタム ポリシーが用意されています。 企業は、複数のソースと宛先からの接続の中心点として機能する仮想ハブをデプロイできます。 ExpressRoute、VPN ゲートウェイ、および Azure Firewall も、ネットワーク接続要件に対応するためにプロビジョニングされます。  

- **仮想マシンのバックアップ**

    クラウドの導入が増加するにつれて、企業は Azure のワークロードを確実にバックアップするという課題に直面します。 アプリ開発と IT 運用が別々のチームによって管理される従来の IT サポート モデルでは、VM バックアップの所有権が不明確になることがあります。 バックアップ プロセスが欠落していると、ワークロードを復元するために VM バックアップが必要となる、意図的または意図しないシナリオで、コストがかかる結果になる場合があります。

    Azure Backup には、Azure またはオンプレミス サイトで実行されている VM をバックアップするためのシームレスかつ簡単で統合されたオプションが用意されています。 Azure Backup ではクラウド規模のストレージを使用するため、企業はバックアップ用のストレージを常に調達して管理する必要がありません。 Azure Backup には、保存中および転送中のデータを安全に格納するリポジトリが用意されています。

    Azure には、Windows および Linux VM の Azure バックアップ保護を自動的に構成するカスタム ポリシーが用意されています。 Azure Recovery Services コンテナーは、バックアップを保存し、データを安全に格納し、**論理的な削除** を使用してバックアップが悪意を持って削除されるのを防ぐように構成されます。 既定のバックアップ ポリシーが作成され、バックアップ スケジュールや保持期間などの事前構成された値を使用して割り当てられます。

- **VNet 間の接続をプロビジョニングする**

    企業では、ワークロードを複数のサブスクリプションや VNet に分散させることが一般的です。 その結果、重要なビジネス アプリケーションで、専用のセキュリティで保護されたネットワーク接続なしでのデータの交換に苦労することがあります。 インターネットベースのネットワーク接続では、ネットワーク帯域幅とパフォーマンスの提供に一貫性がない場合があり、ネットワーク待ち時間が長いとユーザー エクスペリエンスに悪影響を及ぼすおそれがあります。

    仮想ネットワーク ピアリングでは、Microsoft のバックボーン ネットワーク経由で 2 つの VNet を接続します。 Azure ピアリングでは、別々の Azure サブスクリプション、テナント、または Azure リージョン間のデータを安全に交換できる、高帯域幅で低待機時間のネットワーク接続をサポートしています。

    Azure には、仮想ネットワーク ピアリングを設定するためのテンプレートを提供するカスタム ポリシーが用意されています。 Azure Resource Manager テンプレート定義にあるネットワーク レイアウトを、パラメーターとして渡すことができます。 このポリシーでは、VNet を開始し、それらの間の VNet ピアリングと、NSG やユーザー定義ルーティングなどの依存関係を構成します。

- **Windows VM が Azure AD ドメインに参加するように強制する**

    企業は、一貫した管理エクスペリエンスのためにドメインに参加している VM を使用しています。 企業のパスワード ポリシーや中央認証などの操作がドメイン ポリシーの一部として作成された場合、ドメインに参加していない VM は、脆弱なパスワードや、企業のデバイスあるいはアプリケーションに接続できないといったリスクにさらされたり、その他の制限を受けたりします。 Microsoft New Technology LAN Manager や Kerberos などの認証プロトコルに依存するレガシ アプリケーションは、ドメインに参加していない VM にデプロイされている場合、認証の問題に直面する可能性があります。 

    Azure には、ドメイン サービスを実装するためのマネージドおよびアンマネージドのソリューションが用意されています。 自己管理型の Azure AD DS サービスを使用すると、企業はオンプレミス環境と同様に、セットアップ、構成、および操作を完全に制御することができます。 このサービスにより、企業は管理のオーバーヘッドから解放される一方、重要なドメイン サービスは提供されます。

    Azure には、新しい Windows VM を自動的にドメインに参加させるカスタム ポリシーが用意されています。 VM にデプロイされた 'JsonADDomainExtension' 拡張機能により、ユーザー名、ドメイン、OUPath などの構成設定を使用して、指定されたドメインに VM が確実に参加するようになります。 このポリシーでは、Azure KeyVault を使用して、機密情報であるドメインのユーザー名とパスワードを管理します。
