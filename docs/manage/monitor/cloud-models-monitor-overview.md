---
title: クラウド デプロイ モデルの監視戦略
description: Azure 向けのクラウド導入フレームワークを使用して、採用すべきクラウド管理の監視戦略について学習します。
author: MGoedtel
ms.author: brblanch
ms.date: 10/20/2020
ms.topic: conceptual
ms.service: cloud-adoption-framework
ms.subservice: operate
ms.custom: think-tank
ms.openlocfilehash: 8b27b996b631c45ee09d7e44a2fbd3ff3567d8d7
ms.sourcegitcommit: 9e4bc0e233a24642853f5e8acbeb9746b2444024
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/04/2021
ms.locfileid: "102114015"
---
<!-- docutune:casing "Squared Up" Savision APM -->
<!-- cSpell:ignore Savision -->

# <a name="cloud-monitoring-guide-monitoring-strategy-for-cloud-deployment-models"></a>クラウド監視ガイド: クラウド デプロイ モデルの監視戦略

この記事では、次の基準に基づいて、クラウド デプロイ モデルごとに推奨する監視戦略について説明します。

- IT 運用プロセス、知識、専門知識と統合されているため、または Azure Monitor で特定の機能をまだ利用できないため、Operations Manager または別のエンタープライズ監視プラットフォームに関与し続ける必要があります。
- オンプレミスとパブリック クラウドの両方で、またはクラウド内だけで、ワークロードを監視する必要があります。
- あなたのクラウド移行戦略には、IT 運用の最新化や、Microsoft のクラウド監視サービスおよびソリューションへの移行が含まれます。
- エアギャップにより、または物理的に隔離され、またはプライベート クラウドや物理ハードウェアでホストされている重要なシステムを備えている可能性があり、これらのシステムは監視される必要があります。

この戦略には、インフラストラクチャ (コンピューティング、ストレージ、サーバーのワークロード)、アプリケーション (エンド ユーザー、例外、クライアント)、ネットワーク リソースを監視するためのサポートが含まれています。 完全なサービス指向の監視の観点が提供されます。

## <a name="azure-cloud-monitoring"></a>Azure クラウドの監視

Azure Monitor は、Azure リソースを 1 つのソースから監視できる Azure ネイティブ プラットフォーム サービスです。 次のようなクラウド ソリューション向けに設計されています。

- Azure を基にして構築されています。
- 仮想マシン (VM) のワークロードに基づくビジネス機能、またはマイクロサービスや他のプラットフォーム リソースを使用する複雑なアーキテクチャをサポートしています。

Azure Active Directory Domain Services などのテナント サービスから、サブスクリプション レベルのイベント、Azure Service Health まで、スタックのすべてのレイヤーが監視されます。

また、VM、ストレージ、ネットワーク リソースなどのインフラストラクチャ リソースも監視されます。 最上位レイヤーでは、アプリケーションが監視されます。

これらの各依存関係を監視し、それぞれが出す可能性のある適切な信号を収集することで、必要なアプリケーションや主要インフラストラクチャを観察できます。

次の表は、各スタック レイヤーを監視するための推奨される方法をまとめたものです。

| レイヤー | リソース | Scope | Method |
|---|---|---|---|
| Application | Azure VM、Azure App Service、Azure Service Fabric、Azure Functions、および Azure Cloud Service 上の .NET、.NET Core、Java、JavaScript、および Node.js プラットフォームで実行されている Web ベースのアプリケーション。 | ライブ Web アプリケーションを監視して、パフォーマンスの異常を自動検出し、コードの例外と問題を識別し、ユーザー動作の分析を収集します。 | Application Insights (Azure Monitor の機能)。 |
| Azure リソース - サービスとしてのプラットフォーム (PaaS) | Azure Database サービス (SQL、MySQL など)。 | Azure SQL Database のパフォーマンス メトリック。 | 診断ログで SQL データを Azure Monitor ログにストリーミングできるようにします。 |
| Azure リソース - サービスとしてのインフラストラクチャ (IaaS) | 1.Azure Storage <br> 2.Azure の[負荷分散サービス](/azure/architecture/guide/technology-choices/load-balancing-overview#azure-load-balancing-services) <br> 3.ネットワーク セキュリティ グループ <br> 4.Azure Virtual Machines <br> 5.[Azure Kubernetes Service](/azure/aks/intro-kubernetes)/[Azure Container Instances](/azure/container-instances/) | 1.容量、可用性、およびパフォーマンス。 <br> 2.パフォーマンス ログと診断ログ (アクティビティ、アクセス、パフォーマンス、ファイアウォール)。 <br> 3.ルールが適用されたときのイベントと、拒否または許可を行うためにルールが適用された回数を示すルール カウンターを監視します。 <br> 4.ゲスト VM オペレーティング システム (OS) での容量、可用性、パフォーマンスを監視します。 各 VM 上でホストされているアプリケーションの依存関係をマップします。これには、サーバー間のアクティブなネットワーク接続の可視性、受信および送信接続の待機時間、任意の TCP 接続アーキテクチャでのポートなどが含まれます。 <br> 5.コンテナーおよびコンテナー インスタンス上で実行されるワークロードの容量、可用性、およびパフォーマンスを監視します。 | 最初の列の項目 1 から 5 では、プラットフォーム メトリックとアクティビティ ログが自動的に収集され、分析とアラートのために Azure Monitor で使用できます。 <br> リソース ログを Azure Monitor ログに転送するように診断設定を構成します。 <br> 4.[Azure Monitor for VMs](/azure/azure-monitor/vm/vminsights-overview) を有効にします。 <br> 5.[Azure Monitor for containers](/azure/azure-monitor/containers/container-insights-overview) を有効にします。 |
| ネットワーク | ご利用の仮想マシンと 1 つまたは複数のエンドポイント (別の VM、完全修飾ドメイン名、Uniform Resource Identifier、または IPv4 アドレス) との間の通信です。 | VM とエンドポイントの間で発生する到達可能性、待機時間、およびネットワーク トポロジ変更を監視します。 | Azure Network Watcher。 |
| Azure サブスクリプション | Azure サービスの観点からの [Azure Service Health](/azure/service-health/overview) と基本的なリソース正常性。 | <li> サービスまたはリソースに対して実行された管理操作。 <li> 低下状態または利用不可状態である、Azure サービスのサービス正常性。 <li> Azure サービスの観点から Azure リソースで検出された正常性の問題。 <li> 失敗または例外を示す Azure の自動スケーリングを使用して実行された操作。 <li> 許可または拒否操作が発生したことを示す Azure Policy を使用して実行された操作。 <li> Azure Security Center によって生成されたアラートのレコード。 | Azure Monitor を使用して、監視およびアラート用にアクティビティ ログで提供されます。 |
| Azure テナント | Azure Active Directory | Azure AD 監査ログとサインイン ログ。 | [診断ログ](/azure/active-directory/reports-monitoring/howto-integrate-activity-logs-with-log-analytics)を有効にし、Azure Monitor ログへのストリーミングを構成します。 |

## <a name="hybrid-cloud-monitoring"></a>ハイブリッド クラウドの監視

多くの組織では、クラウドに段階的に移行する必要がありますが、その過程の最初のステップとして最も一般的なものはハイブリッド クラウド モデルです。 ビジネスの中断を回避しながら、適切なアプリケーションとインフラストラクチャのサブセットを慎重に選択して移行を開始します。 ただし、このクラウド モデルをサポートする監視プラットフォームは 2 つ用意されているため、IT の意思決定者は、ビジネス目標と IT の運用目標を達成するためにどのプラットフォームが最適か明確に判断できないことがあります。

このセクションでは、不明確さをなくすため、いくつかの要素を確認し、どのプラットフォームを検討すべきか判断できるようにします。

次の主要な技術的面に注意してください。

- ワークロードをサポートする Azure リソースからデータを収集し、それらを既存のオンプレミスのツールまたはマネージド サービス プロバイダーのツールに転送する必要があります。

- System Center Operations Manager への現在の投資を維持し、Azure で実行されている IaaS および PaaS リソースを監視するように構成する必要があります。 場合によっては、特性の異なる 2 つの環境を監視するので、要件に基づいて、Azure Monitor との統合によって戦略をサポートする方法を決定します。

- 単一のツールに標準化してコストと複雑さを軽減するための最新化戦略の一環として、Azure Monitor を使用して、Azure および企業ネットワーク内のリソースを監視する必要があります。

次の表は、一般的な条件のセットに基づいて、ハイブリッド クラウド モデルの監視を使用して Azure Monitor および System Center Operations Manager サポートする要件をまとめたものです。

| 要件 | Azure Monitor | Operations Manager |
|---|---|---|
| インフラストラクチャの要件 | いいえ | はい <br><br> 1 つの管理サーバーと、オペレーション データベースとレポート データ ウェアハウス データベースをホストする 1 つの SQL Server インスタンスが少なくとも必要です。 高可用性とディザスター リカバリーが必要で、複数のサイト、信頼されていないシステム、およびその他の複雑な設計上の考慮事項がある場合は、複雑さが増します。 |
| 接続の制限 - インターネットまたは分離ネットワークなし | いいえ | はい |
| 接続の制限 - 制御されたインターネット アクセス | はい | はい |
| 接続の制限 - 頻繁に切断 | はい | はい |
| 構成可能な正常性の監視 | いいえ | はい |
| Web アプリの可用性テスト (分離されたネットワーク) | はい、制限あり <br><br> この領域では Azure Monitor のサポートが制限されており、カスタム ファイアウォールの例外が必要です。 | はい |
| Web アプリの可用性テスト (グローバル分散) | いいえ | はい |
| VM ワークロードの監視 | はい、制限あり <br><br> IIS および SQL Server のエラー ログ、Windows イベント、およびパフォーマンス カウンターを収集できます。 カスタム クエリ、アラート、および視覚化の作成が必要です。 | はい <br><br> 利用可能な管理パックを使用して、ほとんどのサーバー ワークロードの監視をサポートします。 VM 上に Log Analytics Windows エージェントまたは Operations Manager エージェントのいずれかを必要とし、企業ネットワーク上の管理グループに報告します。 |
| Azure IaaS の監視 | はい | はい <br><br> 企業ネットワークからの大部分のインフラストラクチャの監視をサポートします。 Azure 管理パックを使用して、Azure VM、SQL、およびストレージの可用性の状態、メトリック、およびアラートを追跡します。 |
| Azure PaaS の監視 | はい | はい、制限あり <br><br> Azure 管理パックでサポートされている内容に基づいています。 |
| Azure サービスの監視 | はい | はい <br><br> 現在、管理パックでは Azure Service Health のネイティブな監視は提供されていませんが、カスタム ワークフローを作成して、Service Health アラートのクエリを実行できます。 Azure REST API を使用し、既存の通知を介してアラートを取得します。 |
| 最新の Web アプリケーションの監視 | はい | いいえ |
| レガシ Web アプリケーションの監視 | はい、制限あり、SDK によって異なります <br><br> .NET および Java Web アプリケーションのより古いバージョンの監視をサポートします。 | はい、制限あり |
| Azure Kubernetes Service コンテナーを監視する | はい | いいえ |
| Docker または Windows コンテナーを監視する | はい | いいえ |
| ネットワーク パフォーマンスの監視 | はい | はい、制限あり <br><br> 可用性チェックがサポートされ、簡易ネットワーク管理プロトコル (SNMP) プロトコルを使用して企業ネットワークのネットワーク デバイスから基本的な統計情報が収集されます。 |
| 対話型データ分析 | はい | いいえ <br><br> SQL Server Reporting Services のあらかじめ準備されたレポートまたはカスタムのレポート、サードパーティの視覚化ソリューション、またはカスタムの Power BI 実装に依存しています。 Operations Manager データ ウェアハウスには、スケールとパフォーマンスの制限があります。 データ集約要件に対する代替手段として Azure Monitor ログと統合します。 Log Analytics コネクタを構成することにより、統合を実現します。 |
| エンドツーエンドの診断、根本原因の分析、および適切なタイミングでのトラブルシューティング | はい | はい、制限あり <br><br> エンドツーエンドの診断とトラブルシューティングは、オンプレミスのインフラストラクチャとアプリケーションに対してのみサポートされます。 他の System Center コンポーネントまたはパートナー ソリューションを使用します。 |
| 対話型の視覚化 (ダッシュボード) | はい | はい、制限あり <br><br> HTML5 Web コンソール、または Squared Up や Savision などのパートナー ソリューションの高度なエクスペリエンスで、基本的なダッシュボードが提供されます。 |
| IT または DevOps ツールとの統合 | はい | はい、制限あり |

### <a name="collect-and-stream-monitoring-data-to-third-party-or-on-premises-tools"></a>監視データを収集してサード パーティ ツールまたはオンプレミス ツールにストリーミングする

Azure インフラストラクチャおよびプラットフォームのリソースからメトリックとログを収集するには、それらのリソースを対象にした Azure 診断ログを有効にする必要があります。 さらに、Azure VM では、Azure Diagnostics の拡張機能を有効にすることで、ゲスト OS からメトリックとログを収集できます。 Azure リソースから生成された診断データを、オンプレミスのツールまたはマネージド サービス プロバイダーに転送するには、データをそれらにストリーミングするように [Event Hubs](/azure/azure-monitor/essentials/resource-logs#send-to-azure-event-hubs) を構成します。

### <a name="monitor-with-system-center-operations-manager"></a>System Center Operations Manager を使用して監視する

System Center Operations Manager は、元々、IT 環境で実行されているアプリケーション、ワークロード、インフラストラクチャ コンポーネント全体で監視するオンプレミス ソリューションとして設計されましたが、クラウド監視機能を含むように進化しています。 Azure、Microsoft 365、およびアマゾン ウェブ サービス (AWS) と統合されています。 このような多様な環境をサポートするように設計および更新されている管理パックを使用して、それらを監視できます。

IT サービス マネジメント プロセスおよびツールと緊密に統合された包括的な監視を実現するために Operations Manager に多額の投資を行ってきたお客様や、Azure を初めて使用するお客様であれば、次のような疑問を持っても当然です。

- Operations Manager は価値を提供し続けることができるか。また、ビジネス上の意味はあるか。
- Operations Manager の機能は自社の IT 組織に適しているか。
- Operations Manager と Azure Monitor を統合することで、コスト効率に優れた包括的な監視ソリューションを実現できるか。

既に Operations Manager に投資している場合は、それをすぐに置き換えるための移行計画に集中する必要はありません。 Azure または他のクラウド プロバイダーが独自のオンプレミス ネットワークの拡張機能として存在する場合、Operations Manager でゲスト VM と Azure リソースを企業ネットワーク上にある場合と同様に監視できます。 この方法では、独自のネットワークと Azure の仮想ネットワークの間に、十分な帯域幅を持つ信頼性の高いネットワーク接続が必要です。

Azure で実行されているワークロードを監視するには、次のものが必要です。

- [Azure 用 System Center Operations Manager 管理パック](https://www.microsoft.com/download/details.aspx?id=50013)。 Web ロール、worker ロール、Application Insights 可用性テスト (Web テスト)、Azure Service Bus などの Azure サービスから出力されたパフォーマンス メトリックが収集されます。 この管理パックでは、Azure REST API を使用して、これらのリソースの可用性とパフォーマンスを監視します。 Azure サービスの一部の種類では、メトリックまたは事前定義されたモニターは管理パックに含まれていませんが、検出されたサービスの Azure 管理パックで定義されているリレーションシップを通じてそれらを引き続き監視できます。

- SQL Server システム ビューに対する Azure REST API と T-SQL のクエリを使用して、Azure SQL データベースおよび Azure SQL Database インスタンスの可用性とパフォーマンスを監視するための [Azure SQL Database 用管理パック](https://www.microsoft.com/download/details.aspx?id=38829)。

- ゲスト OS と、SQL Server、IIS、Apache Tomcat などの VM 上で実行されているワークロードを監視するには、アプリケーション、サービス、OS がサポートされている管理パックをダウンロードしてインポートする必要があります。

ナレッジは管理パックで定義されており、個々の依存関係およびコンポーネントを監視する方法が記述されています。 どちらの Azure 管理パックでも、これらのリソースの監視を開始するには、その前に Azure と Operations Manager で一連の構成手順を実行する必要があります。

アプリケーション層では、Operations Manager は .NET および Java の一部のレガシ バージョンに対して基本的なアプリケーション パフォーマンス監視機能を提供します。 ハイブリッド クラウド環境内の特定のアプリケーションがオフラインまたはネットワーク分離モードで動作していて、パブリック クラウド サービスと通信できない場合、一部の限られたシナリオでは Operations Manager のアプリケーション パフォーマンス監視 (APM) を使用できる場合があります。 レガシ プラットフォーム上で実行されていなくても、オンプレミスと、ファイアウォールを介して (直接またはプロキシ経由) Azure と通信できるパブリック クラウドの両方でホストされているアプリケーションの場合は、Azure Monitor Application Insights を使用します。 このサービスでは、ASP.NET、ASP.NET Core、Java、JavaScript、および Node.js が高度にサポートされる、詳細なコードレベルの監視が提供されます。

外部から到達できる Web アプリケーションの場合は、[可用性の監視](/azure/azure-monitor/app/monitor-web-app-availability)と呼ばれる代理トランザクションの種類を有効にする必要があります。 アプリケーション、またはアプリケーションが依存しているクリティカルな HTTP/HTTPS エンドポイントが利用可能で応答可能かどうかを把握していることが重要です。 Application Insights の可用性の監視を使用すると、複数の Azure データセンターからテストを実行し、グローバルな観点からアプリケーションの正常性についての分析情報を得ることができます。

Operations Manager を使用して Azure でホストされているリソースを監視することはできますが、Azure Monitor を組み込むことにはいくつかの利点があります。その利点で Operations Manager の制限を克服し、最終的な移行をサポートする強力な基盤を確立できます。 ここでは、そのような長所と短所、およびハイブリッド監視戦略に Azure Monitor を含める場合の推奨事項について見ていきます。

#### <a name="disadvantages-of-using-operations-manager-by-itself"></a>Operations Manager を単独で使用する場合の欠点

- Operations Manager での監視データの分析は、通常、管理パックで提供され、コンソールからアクセスする事前定義ビュー、SQL Server Reporting Services (SSRS) レポート、またはエンド ユーザーが作成したカスタム ビューを使用して実行されます。 アドホック データ分析は、すぐには使用できません。 Operations Manager のレポート機能は柔軟ではありません。 監視データの長期保存が提供されるデータ ウェアハウスの拡張性やパフォーマンスは十分ではありません。 また、IT 組織内のさまざまなペルソナの要件をサポートするには、T-SQL ステートメントの記述、Power BI ソリューションの開発、またはサードパーティ製ソリューションの使用に関する専門知識が必要です。

- Operations Manager のアラート機能では、複雑な式がサポートされていないか、相関ロジックが含まれていません。 ノイズを低減するため、アラートはグループ間の関係を示し、その原因を示すためにグループ化されています。

#### <a name="advantages-of-using-operations-manager-with-azure-monitor"></a>Operations Manager と Azure Monitor を併用する利点

- Azure Monitor は、Operations Manager の制限を回避する手段です。 重要なパフォーマンスおよびログ データを収集することで、Operations Manager データ ウェアハウス データベースを補完します。 Operations Manager のデータ ウェアハウスより、Azure Monitor の方が、分析、パフォーマンス (大量のデータのクエリを行うとき)、保有の点で優れています。

  Azure Monitor ログのクエリ言語を使用すると、いっそう複雑で高度なクエリを作成できます。 テラバイト単位のデータに対するクエリを、数秒で実行できます。 ご利用のデータを円グラフ、タイム チャート、およびその他のさまざまな視覚化にすばやく変換することができます。 このデータを分析する方法が、SQL Server Reporting Services、カスタム SQL クエリ、または他の回避策に基づく Operations Manager レポートだけに制約されることはなくなりました。

- Azure Monitor Alert Management ソリューションを実装することで、改善されたアラート エクスペリエンスを提供できます。 Operations Manager 管理グループで生成されたアラートは、Azure Monitor Log Analytics ワークスペースに転送できます。 特定のアラートのみを転送するように、Operations Manager から Azure Monitor ログへのアラートの転送を行うサブスクリプションを構成できます。 たとえば、クエリの基準を満たすアラートのみを転送することで、傾向の問題管理や、エラーまたは問題の根本原因の調査を 1 つの画面で行いやすくなります。 さらに、Application Insights または他のソースからの他のログ データを関連付けることで、ユーザー エクスペリエンスの向上、稼働時間の増加、およびインシデントの解決時間の短縮に役立つ分析情報を得ることができます。

- Azure Monitor を使用して Azure 内の単一または多層のアーキテクチャから、クラウドネイティブのインフラストラクチャとアプリケーションを監視し、Operations Manager を使用してオンプレミスのインフラストラクチャを監視できます。 この監視には、1 つまたは複数の VM、可用性セットまたは仮想マシン スケール セットに配置された複数の VM、または Windows Server または Linux コンテナー上で実行されている Azure Kubernetes Service (AKS) にデプロイされたコンテナー化アプリケーションが含まれます。

    Azure VM で実行されている Microsoft またはサードパーティのワークロードを包括的に監視する必要があり、ログまたはパフォーマンス データのみに基づいて評価できない高度なシナリオがある場合は、System Center Operations Manager を使用します。 その管理パックでは、ワークロードの運用の正常性を判断するための高度なロジック (サービスおよび正常性のモデルを含む) が提供されます。

- Azure Monitor for VMs のマップ機能を使用すると、Azure VM とオンプレミス VM の間のネットワーク接続からの標準的な接続メトリックを監視できます。 これらのメトリックとして、応答時間、1 分あたりの要求数、トラフィックのスループット、リンクがあります。 失敗した接続の識別、トラブルシューティング、移行の検証の実施、セキュリティ分析の実行、サービスの全体的なアーキテクチャの検証ができます。 マップは、Windows および Linux システムのアプリケーション コンポーネントを自動的に検出したり、サービス間の通信をマップしたりできます。 この自動化は、認識していなかった接続および依存関係の識別、Azure への移行の計画および検証、インシデント解決時の推論の最小化に役立ちます。

- Network Performance Monitor を使用して、以下の要素間のネットワーク接続を監視できます。
  - 企業ネットワークと Azure。
  - ミッション クリティカルな多層アプリケーションとマイクロサービス。
  - ユーザーの場所と Web ベースのアプリケーション (HTTP/HTTPS)。

    この戦略で、SNMP を必要としないネットワーク レイヤーの可視性が実現します。 対話型のトポロジ マップに、送信元と宛先のエンドポイント間の経路のホップバイホップ トポロジを表示することもできます。 Operations Manager のネットワーク監視や現在の環境で使用されているその他のネットワーク監視ツールを使用して同じ結果を得ようとするよりも、こちらの方が適切な選択です。

### <a name="monitor-with-azure-monitor"></a>Azure Monitor による監視

クラウドへの移行には多くの課題がありますが、好機にもなります。 組織は、1 つ以上のオンプレミスのエンタープライズ監視ツールから移行し、資本投資と運用コストを削減できる可能性があるだけでなく、Azure Monitor などのクラウド監視プラットフォームがクラウド規模で提供する利点も得られます。 監視とアラートの要件、既存の監視ツールの構成、クラウドに移行するワークロードを確認します。 計画が完成したら、Azure Monitor を構成します。

- シンプルなアーキテクチャから、または Azure、他のクラウド プロバイダー、および企業ネットワーク間でコンポーネントがホストされている多層アーキテクチャから、ハイブリッド インフラストラクチャとアプリケーションを監視します。 コンポーネントには、1 つまたは複数の VM、可用性セットまたは仮想マシン スケール セットに配置された複数の VM、または Windows Server または Linux コンテナー上で実行されている Azure Kubernetes Service (AKS) にデプロイされたコンテナー化アプリケーションが含まれる場合があります。

- [Azure Arc](/azure/azure-arc/overview) を使用して、サーバー、仮想マシン、Kubernetes クラスター、およびデータベースが Azure で実行されているかのように管理するためにそれらを環境全体で準備します。 Azure Arc では、使い慣れた Azure サービスおよび管理機能と共に、一貫したインベントリ、管理、ガバナンス、およびセキュリティが提供されます。

- Azure Monitor for VMs、Azure Monitor for containers、および Application Insights を有効にして、インフラストラクチャとアプリケーションの問題を検出および診断します。 アプリケーションをサポートする複数のコンポーネントまたは依存関係から収集されたデータのさらに詳細な分析と相関関係には、Azure Monitor ログを使用する必要があります。

- アプリケーションとサービス コンポーネントのコア セットに適用されるインテリジェントなアラートを作成し、複雑なシグナルの動的しきい値でアラートのノイズを削減し、機械学習アルゴリズムに基づいたアラートの集計を使用して問題を迅速に特定します。

- IT 組織内のさまざまなペルソナの要件をサポートするために、クエリとダッシュボードのライブラリを定義します。

- ハイブリッドおよびクラウド リソース全体の監視、各リソースの監視基準、アラートのしきい値などを有効にするための標準と方法を定義します。

- Azure ロールベースのアクセス制御 (Azure RBAC) を構成して、ユーザーとグループに対し、管理対象のリソースからのデータを監視するために必要なアクセス権のみを付与します。

- 各チームが必要に応じて監視とアラートの構成を作成、有効化、および調整できるように、自動化とセルフサービスを含めます。

## <a name="private-cloud-monitoring"></a>プライベート クラウドの監視

System Center Operations Manager を使用して、Azure Stack の総合的な監視を実現できます。 具体的には、仮想マシン上のテナント (リソース レベル) で実行されているワークロード、および、Azure Stack をホストしているインフラストラクチャ (物理サーバーとネットワーク スイッチ) を監視できます。

Azure Stack に含まれている[インフラストラクチャ監視機能](/azure-stack/operator/azure-stack-monitor-health)を組み合わせて総合的な監視を実現することもできます。 これらの機能は、Azure Stack リージョンの正常性とアラート、および Azure Stack の [Azure Monitor サービス](/azure-stack/user/azure-stack-metrics-azure-data)を表示するために役立ちます。後者は、基本レベルのインフラストラクチャ メトリックと、ほとんどのサービスのログを提供します。

Operations Manager に既に投資している場合は、Azure Stack 管理パックを使用して、リージョン、リソース プロバイダー、更新プログラム、更新プログラムの実行、スケール ユニット、ユニット ノード、インフラストラクチャのロール、それらのインスタンス (ハードウェア リソースで構成される論理エンティティ) など、Azure Stack デプロイの可用性と正常性の状態を監視します。 この管理パックでは、正常性および更新プログラムのリソース プロバイダーの REST API を使用して Azure Stack との通信が行われます。 物理サーバーとストレージ デバイスを監視するには、OEM ベンダーの管理パックを使用します (たとえば、Lenovo、HPE、または Dell から提供されています)。 Operations Manager では、ネットワーク スイッチをネイティブに監視し、SNMP を使用して基本的な統計を収集することができます。 Azure 管理パックでは、2 つの基本的な手順に従ってテナント ワークロードを監視できます。 監視するサブスクリプションを構成してから、そのサブスクリプション用のモニターを追加します。

## <a name="next-steps"></a>次のステップ

> [!div class="nextstepaction"]
> [適切なデータの収集](./data-collection.md)
